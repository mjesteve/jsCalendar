<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,maximum-scale=1.0">
		<title>jsCalendar Demo</title>
		<meta name="description" content="jsCalendar demo - year calendar">
		<meta name="author" content="GramThanos">

		<!-- jsCalendar -->
		<link rel="stylesheet" type="text/css" href="../source/jsCalendar.css">
		<link rel="stylesheet" type="text/css" href="../themes/jsCalendar.clean.css">
		<script type="text/javascript" src="../source/jsCalendar.js"></script>

		<!--[if lt IE 9]>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
		<![endif]-->
		
		<!-- Demo Style -->
		<style>
			html, body {
				font-family: "Century Gothic", CenturyGothic, AppleGothic, sans-serif;
			}
			.description {
				padding-bottom: 40px;
				text-align: left;
				width: 970px;
				margin: 0 auto;
			}
			
			.version {
				font-size: 10px;
				opacity: 0.6;
				text-align: right;
				width: 970px;
				margin: 0 auto;
				padding-top: 20px;
			}
			@media print {
				html, body {
					width: 100%;
					height: 100%;
				}
				body {
					zoom: 62%;
				}
				.description {
					display: none;
				}
				@page {
					size: A4 Portrait;
					max-height: 100%;
					max-width: 100%;
				}
			}
			#yearly-calendar-container, #yearly-calendar-container-auto{
                padding: 20px;
            }

            .jsCalendar {
                border: 1px solid #ccc;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            }

		</style>
	</head>
	<body>
		<div class="description">
			<div style="font-size: 1.4em;">Year calendar</div>
			<div>Demo full year calendar using jsCalendar</div>
			<div style="font-size: 0.75em;">Try to print it [Ctrl+P]</div>
		</div>

		<!-- Full Calendar wrapper -->
         <div id="yearly-calendar-container"></div>
         <div id="yearly-calendar-container-auto"></div>

		<!-- Example Extensions Load before creating calendars-->
		<script type="text/javascript">
			(function($){
				// Check if jsCalendar exists
				if (!$) throw 'Error jsCalendar library was not found';

				var addDateOnElement = function(element, date) {
					element.setAttribute('date', String(date.getDate()).padStart(2, '0') + '/' + String(date.getMonth() + 1).padStart(2, '0') + '/' + String(date.getFullYear()));
				};

				// Instance Handlers
				var update = function(instance, month) {
					// Update days elements
					for (var i = month.days.length - 1; i >= 0; i--) {
						addDateOnElement(instance._elements.bodyCols[i], month.days[i]);
					}
				};

				// Load extension
				$.ext('custom-date-attribute', {update : update});
			})(window.jsCalendar);
		</script>
		
		<!-- Create the calendar -->
		<script type="text/javascript">
            function createYearlyCalendar(config = {}) {
                const container = document.getElementById('yearly-calendar-container');
                container.innerHTML = ''; // Limpiar el contenedor

                const monthsPerRow = config.monthsPerRow || 3; // 3 meses por fila por defecto
                const totalMonths = 12;
                const containerWidth = container.clientWidth;
                const calendarWidth = Math.floor(containerWidth / monthsPerRow) - 20; // Ajustar el tamaño con margen

                container.style.display = "grid";
                container.style.gridTemplateColumns = `repeat(${monthsPerRow}, 1fr)`;
                container.style.gridGap = "10px";

                for (let i = 0; i < totalMonths; i++) {
                    const calendarDiv = document.createElement('div');
                    calendarDiv.style.width = `${calendarWidth}px`;
                    calendarDiv.style.margin = "10px";
                    container.appendChild(calendarDiv);

                    jsCalendar.new({
                        target: calendarDiv,
                        date: new Date(new Date().getFullYear(), i, 1), // Set month (i) and year (current year)
                        options: {
                            navigator: false, // Desactivar la navegación si no es necesaria
                        }
                    });
                }
            }

            // Ejemplo de uso:
            createYearlyCalendar({ monthsPerRow: 4 }); // Configurar para 4 meses por fila

			function createYearlyCalendarAuto(config = {}) {
                const container = document.getElementById('yearly-calendar-container-auto');
                container.innerHTML = ''; // Limpiar el contenedor

                const totalMonths = 12;
                const containerWidth = container.clientWidth;
                const calendarWidth = config.calendarWidth || 200; // Ancho por defecto de cada calendario
                const monthsPerRow = Math.floor(containerWidth / calendarWidth);

                container.style.display = "grid";
                container.style.gridTemplateColumns = `repeat(${monthsPerRow}, 1fr)`;
                container.style.gridGap = "10px";

                for (let i = 0; i < totalMonths; i++) {
                    const calendarDiv = document.createElement('div');
                    calendarDiv.style.width = `${calendarWidth}px`;
                    calendarDiv.style.margin = "10px";
                    container.appendChild(calendarDiv);

                    jsCalendar.new({
                        target: calendarDiv,
                        date: new Date(new Date().getFullYear(), i, 1),
                        options: {
                            navigator: false,
                        }
                    });
                }
            }

            // Ejemplo de uso:
            createYearlyCalendarAuto(); // Auto-configuración basada en el ancho del contenedor

		</script>
		
		<div class="version">
			jsCalendar <span id="jsCalendar-version"></span>
		</div>
		<script type="text/javascript">document.getElementById('jsCalendar-version').textContent = jsCalendar.version;</script>
	</body>
</html>
